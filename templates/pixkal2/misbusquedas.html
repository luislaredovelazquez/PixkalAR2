{% extends 'pixkal2/base.html' %}

{% load static %}

{% block head %}
<link href="{% static 'pixkal2/cards.css' %}" rel="stylesheet">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
{% endblock %}

{% block content %}

{% if user.is_authenticated %}

  <h2>Mis b√∫squedas</h2>


<div class="card-columns">

  {% for mibusqueda in misbusquedas %}
  <!-- Card -->

<div class="card">
  <div class="wrapper">
    		<div class="card radius shadowDepth1">
    			<div class="card__image border-tlr-radius">
    				<img src="/media/{{ mibusqueda.imagen }}" alt="image" class="border-tlr-radius">
                </div>

    			<div class="card__content card__padding">
                    <div class="card__share">
                        <div class="card__social">
                            <a class="share-icon facebook" href="#"><span class="fa fa-facebook"></span></a>
                            <a class="share-icon twitter" href="#"><span class="fa fa-twitter"></span></a>
                            <a class="share-icon googleplus" href="#"><span class="fa fa-google-plus"></span></a>
                        </div>

                        <a id="share" class="share-toggle share-icon" href="#"></a>
                    </div>

    				<div class="card__meta">
                        Creado: <time>{{ mibusqueda.creacion }}</time>
    				</div>

    				<article class="card__article">
	    				<h2><a href="/busqueda/{{mibusqueda.id}}/editar/">{{ mibusqueda.titulo_busqueda }}</a></h2>

	    				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ducimus harum...</p>
	    			</article>
    			</div>

    			<div class="card__action">

    				<div class="card__author">
    				    <div style="width: 32px; height: 32px;">
    					<img src="/media/{{ mibusqueda.perfil.imagen_busqueda }}" alt="user" style="width: 100%; height: 100%;"/>
    					</div>
    					<div class="card__author-content">
    						Por <a href="#">{{ mibusqueda.creador.username }}</a>
    					</div>
    				</div>
    			</div>
    		</div>
  </div>

</div>
  <!-- Card -->

  {% endfor %}

</div>

    {% if misbusquedas.has_other_pages %}
    <ul class="pagination">
    {% if misbusquedas.has_previous %}
      <li class="page-item"><a href="?page={{ misbusquedas.previous_page_number }}"  class="page-link">&laquo;</a></li>
    {% else %}
      <li class="disabled page-item"><span  class="page-link">&laquo;</span></li>
    {% endif %}
    {% for i in misbusquedas.paginator.page_range %}
      {% if misbusquedas.number == i %}
        <li class="active page-item"><span  class="page-link">{{ i }} <span class="sr-only">(current)</span></span></li>
      {% else %}
        <li class="page-item"><a href="?page={{ i }}"  class="page-link">{{ i }}</a></li>
      {% endif %}
    {% endfor %}
    {% if misbusquedas.has_next %}
      <li class="page-item"><a href="?page={{ misbusquedas.next_page_number }}"  class="page-link">&raquo;</a></li>
    {% else %}
      <li class="disabled page-item"><span class="page-link">&raquo;</span></li>
    {% endif %}
  </ul>
{% endif %}



{% else %}
Acceso restringido
{% endif %}

<script>

$(document).ready(function($) {

	$('.card__share > a').on('click', function(e){
		e.preventDefault() // prevent default action - hash doesn't appear in url
   		$(this).parent().find( 'div' ).toggleClass( 'card__social--active' );
		$(this).toggleClass('share-expanded');
    });

});


</script>
 <p class="text-center">Creado por <a href="https://twitter.com/pixkal">Pixkal</a></p>
{% endblock %}